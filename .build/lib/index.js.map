{
  "version": 3,
  "sources": ["../../stacks/ApiStack.js", "../../stacks/StorageStack.js", "../../stacks/index.js"],
  "sourcesContent": ["import { Api, use } from \"@serverless-stack/resources\";\nimport { StorageStack } from \"./StorageStack\";\n\nexport function ApiStack({ stack, app }) {\n  const { profiles, reviews } = use(StorageStack);\n\n  // Create the API\n  const profilesApi = new Api(stack, \"ProfilesApi\", {\n    defaults: {\n      function: {\n        permissions: [profiles],\n        environment: {\n          TABLE_NAME: profiles.tableName,\n        },\n      },\n    },\n    routes: {\n      \"POST /profiles\": \"profiles/createProfile.main\",\n\n\n      \"GET /profiles/{id}\": \"profiles/getProfile.main\",\n      \"PUT /profiles/{id}\": \"profiles/updateProfile.main\",\n      \"DELETE /profiles/{id}\": \"profiles/deleteProfile.main\",\n    },\n  });\n\n  // Create the API\n  // const reviewsApi = new Api(stack, \"ReviewsApi\", {\n  //   defaults: {\n  //     function: {\n  //       permissions: [reviews],\n  //       environment: {\n  //         TABLE_NAME: reviews.tableName,\n  //       },\n  //     },\n  //   },\n  //   routes: {\n  //     \"POST /reviews\": \"reviews/functions/create.main\",\n  //   },\n  // });\n\n  // Show the API endpoint in the output\n  stack.addOutputs({\n    ProfilesApiEndpoint: profilesApi.url,\n    // ReviewsApiEndpoint: reviewsApi.url,\n  });\n\n  // Return the API resource\n  return {\n    profilesApi,\n    // reviewsApi,\n  };\n}", "import { Bucket, Table } from \"@serverless-stack/resources\";\n\nexport function StorageStack({ stack }) {\n  // Create an S3 bucket\n  const bucket = new Bucket(stack, \"Photos\");\n\n  // Create the DynamoDB table\n  const profiles = new Table(stack, \"Profiles\", {\n    fields: {\n      profileId: \"string\",\n      profileName: \"string\",\n      profileRole: \"string\",\n      profilePhoto: \"string\",\n      profileLikes: \"number\",\n    },\n    primaryIndex: { partitionKey: \"profileId\" },\n  });\n\n  const reviews = new Table(stack, \"Reviews\", {\n    fields: {\n      profileId: \"string\",\n      reviewId: \"string\",\n      body: \"string\"\n    },\n    primaryIndex: { partitionKey: \"reviewId\"},\n  });\n\n  // Return the bucket and table resources\n  return {\n    profiles,\n    reviews,\n    bucket,\n  };\n}\n", "import { ApiStack } from \"./ApiStack\";\nimport { StorageStack } from \"./StorageStack\";\n\nexport default function main(app) {\n  app.setDefaultFunctionProps({\n    runtime: \"nodejs16.x\",\n    srcPath: \"backend\",\n    bundle: {\n      format: \"esm\",\n    },\n  });\n  app.stack(StorageStack).stack(ApiStack);\n}\n"],
  "mappings": ";;;;;;AAAA;;;ACAA;AAEO,sBAAsB,EAAE,SAAS;AAEtC,QAAM,SAAS,IAAI,OAAO,OAAO,QAAQ;AAGzC,QAAM,WAAW,IAAI,MAAM,OAAO,YAAY;AAAA,IAC5C,QAAQ;AAAA,MACN,WAAW;AAAA,MACX,aAAa;AAAA,MACb,aAAa;AAAA,MACb,cAAc;AAAA,MACd,cAAc;AAAA,IAChB;AAAA,IACA,cAAc,EAAE,cAAc,YAAY;AAAA,EAC5C,CAAC;AAED,QAAM,UAAU,IAAI,MAAM,OAAO,WAAW;AAAA,IAC1C,QAAQ;AAAA,MACN,WAAW;AAAA,MACX,UAAU;AAAA,MACV,MAAM;AAAA,IACR;AAAA,IACA,cAAc,EAAE,cAAc,WAAU;AAAA,EAC1C,CAAC;AAGD,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,EACF;AACF;AA/BgB;;;ADCT,kBAAkB,EAAE,OAAO,OAAO;AACvC,QAAM,EAAE,UAAU,YAAY,IAAI,YAAY;AAG9C,QAAM,cAAc,IAAI,IAAI,OAAO,eAAe;AAAA,IAChD,UAAU;AAAA,MACR,UAAU;AAAA,QACR,aAAa,CAAC,QAAQ;AAAA,QACtB,aAAa;AAAA,UACX,YAAY,SAAS;AAAA,QACvB;AAAA,MACF;AAAA,IACF;AAAA,IACA,QAAQ;AAAA,MACN,kBAAkB;AAAA,MAGlB,sBAAsB;AAAA,MACtB,sBAAsB;AAAA,MACtB,yBAAyB;AAAA,IAC3B;AAAA,EACF,CAAC;AAkBD,QAAM,WAAW;AAAA,IACf,qBAAqB,YAAY;AAAA,EAEnC,CAAC;AAGD,SAAO;AAAA,IACL;AAAA,EAEF;AACF;AAjDgB;;;AEAD,cAAc,KAAK;AAChC,MAAI,wBAAwB;AAAA,IAC1B,SAAS;AAAA,IACT,SAAS;AAAA,IACT,QAAQ;AAAA,MACN,QAAQ;AAAA,IACV;AAAA,EACF,CAAC;AACD,MAAI,MAAM,YAAY,EAAE,MAAM,QAAQ;AACxC;AATwB;",
  "names": []
}
